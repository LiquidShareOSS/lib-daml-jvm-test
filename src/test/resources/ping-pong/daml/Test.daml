-- Copyright (c) 2019, Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.
-- SPDX-License-Identifier: Apache-2.0

daml 1.2
module Test where

import PingPong
import Main(allocate)

import Daml.Script
import DA.Functor(void)

testSetup_ = scenario $ do
  alice <- getParty "Alice"
  bob <- getParty "Bob"
  charlie <-getParty "Charlie"
  alice `submit` do
    create Ping with
        sender = alice
        receiver = bob
        count = 2

testSetup: [Text] -> Script ()
testSetup parties = void $ do
  let [alice, bob, charlie] = parties
  alice <- allocate alice
  bob <- allocate bob
  charlie <-allocate charlie
  submit alice $
    createCmd Ping with
        sender = alice
        receiver = bob
        count = 2
